webpackJsonp([0],{"81l+":function(t,e){},CGMp:function(t,e){},"GK+y":function(t,e){},Giql:function(t,e){},YESN:function(t,e){},jjDn:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Dd8w"),s=a.n(i),n=a("PJh5"),r=a.n(n),o=a("woOf"),l=a.n(o),d=a("NYxO"),c=a("Gu7T"),u=a.n(c),m=a("fZjL"),v=a.n(m),h={methods:{today:function(){return this.dateOnly(new Date)},beginningOfPeriod:function(t,e,a){switch(e){case"year":return new Date(t.getFullYear(),0);case"month":return new Date(t.getFullYear(),t.getMonth());case"week":return this.beginningOfWeek(t,a);default:return null}},daysOfWeek:function(t){var e=this;return Array(this.numberDays).fill().map(function(a,i){return e.addDays(t,i)})},addDays:function(t,e){return new Date(t.getFullYear(),t.getMonth(),t.getDate()+e,t.getHours(),t.getMinutes(),t.getSeconds())},getMonday:function(t,e){var a=new Date(t);return this.addDays(a,e).getDate()},getDateDay:function(t,e){var a=new Date(t);return this.addDays(a,e)},beginningOfWeek:function(t,e){var a=this.addDays(t,(e-t.getDay()-this.numberDays)%-this.numberDays);return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},endOfWeek:function(t,e){return this.addDays(this.beginningOfWeek(t,e),this.numberDays)},beginningOfMonth:function(t){return new Date(t.getFullYear(),t.getMonth())},instanceOfMonth:function(t){return Math.ceil(t.getDate()/this.numberDays)},incrementPeriod:function(t,e,a){return new Date(t.getFullYear()+("year"===e?a:0),t.getMonth()+("month"===e?a:0),t.getDate()+("week"===e?a*this.numberDays:0))},paddedMonth:function(t){return("0"+String(t.getMonth()+1)).slice(-2)},paddedDay:function(t){return("0"+String(t.getDate())).slice(-2)},isoYearMonth:function(t){return t.getFullYear()+"-"+this.paddedMonth(t)},isoYearMonthDay:function(t){return this.isoYearMonth(t)+"-"+this.paddedDay(t)},isoMonthDay:function(t){return this.paddedMonth(t)+"-"+this.paddedDay(t)},formattedTime:function(t,e,a){if(0===t.getHours()&&0===t.getMinutes()&&0===t.getSeconds())return"";if(!this.supportsIntl()){var i=6e4*(new Date).getTimezoneOffset();return new Date(t-i).toISOString().slice(11,16)}return a&&a.shortTime?t.toLocaleTimeString(e,a).slice(0,-3):t.toLocaleTimeString(e,a)},formattedPeriod:function(t,e,a,i){var s=[];return s.push(t.getDate()),s.push(" "),s.push(i[t.getMonth()]),s.push(" "),s.push(t.getFullYear()),s.push(" – "),s.push(e.getDate()),s.push(" "),s.push(i[e.getMonth()]),s.push("  "),s.push(e.getFullYear()),s.join("")},dayDiff:function(t,e){var a=new Date(e.getFullYear(),e.getMonth(),e.getDate()),i=new Date(t.getFullYear(),t.getMonth(),t.getDate());return a.setUTCHours(0,0,0,0),i.setUTCHours(0,0,0,0),(a-i)/864e5},hourDiff:function(t,e){return(e-t)/36e5},isSameDate:function(t,e){return 0===this.dayDiff(t,e)},isSameDateTime:function(t,e){return t.getTime()===e.getTime()},isSameMonth:function(t,e){return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()},isWeekend:function(t){return!(t.getDay()%6)},isPastMonth:function(t){return this.beginningOfMonth(t)<this.beginningOfMonth(this.today())},isFutureMonth:function(t){return this.beginningOfMonth(t)>this.beginningOfMonth(this.today())},isInFuture:function(t){return this.dateOnly(t)>this.today()},isInPast:function(t){return this.dateOnly(t)<this.today()},isLastInstanceOfMonth:function(t){return t.getMonth()!==this.addDays(t,this.numberDays).getMonth()},isLastDayOfMonth:function(t){return t.getMonth()!==this.addDays(t,1).getMonth()},isSelectedDay:function(t){var e=this,a=v()(this.dateClasses).find(function(a){return e.isSameDate(e.fromIsoStringToLocalDate(a),t)});return a?this.dateClasses[a]:void 0},isHoliday:function(t,e){var a=this;return!(!t||!t.find(function(t){return a.dateOnly(r()(t.holiday,"DD/MM/YYYY")).getTime()===a.dateOnly(e).getTime()}))},toLocalDate:function(t){return new Date(t)},dateOnly:function(t){var e=new Date(t);return e.setHours(0,0,0,0),e},languageCode:function(t){return t.substring(0,2)},supportsIntl:function(){return"undefined"!=typeof Intl},getFormattedMonthNames:function(t,e){if(!this.supportsIntl())return Array(12).fill("");var a=new Intl.DateTimeFormat(t,{month:e});return Array(12).fill().map(function(t,e){return a.format(new Date(2017,e,1))})},getFormattedWeekdayNames:function(t,e,a){var i=this;if(!this.supportsIntl())return Array(this.numberDays).fill("");var s=new Intl.DateTimeFormat(t,{weekday:e});return Array(this.numberDays).fill().map(function(t,e){return s.format(new Date(2017,0,(e+1+a)%i.numberDays))})},getDefaultBrowserLocale:function(){return"undefined"==typeof navigator?"unk":(navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.language||navigator.browserLanguage).toLowerCase()},normalizeEvent:function(t){var e=this.toLocalDate(t.startDate),a=this.toLocalDate(t.endDate||t.startDate),i=((t.managed||t.me)&&t.lib||"Indisponibilité")+" du "+r()(e).format("DD/MM/YYYY HH:mm")+" au "+r()(a).format("DD/MM/YYYY HH:mm");return{originalEvent:t,startDate:e,endDate:a,classes:t.classes?Array.isArray(t.classes)?[].concat(u()(t.classes)):[t.classes]:[],title:t.title||"",tooltip:i,id_user:t.id_user,statut:t.statut,id:t.id||"e"+Math.random().toString(36).substr(2,10)}}}},_={methods:{getEventFromEvents:function(t){return this.events.filter(function(e){return e.id===+t})[0]},findAndSortEventsInWeek:function(t,e){var a=this,i=this.fixedEvents.filter(function(i){return i.startDate<a.addDays(t,a.numberDays)&&i.endDate>=t&&i.id_user===e.gid_collaborateur},this).sort(function(t,e){return t.startDate<e.startDate?-1:e.startDate<t.startDate?1:t.endDate>e.endDate?-1:e.endDate>t.endDate?1:t.id<e.id?-1:1}),s=this.standbyTime[e.gid_collaborateur];return s&&s.filter(function(e){return new Date(e.start_date)<a.addDays(t,a.numberDays)&&new Date(e.end_date)>=t}).forEach(function(t){i.unshift({startDate:new Date(t.start_date),endDate:new Date(t.end_date),classes:[],astreinte:!0})}),i},getWeekEvents:function(t,e){for(var a=this.findAndSortEventsInWeek(t,e),i=[],s=Array(24*this.numberDays).fill(0).map(function(t){return[]}),n=0;n<a.length;n++){var r=l()({},a[n],{classes:[].concat(u()(a[n].classes)),eventRow:0}),o=r.startDate<t,d=14===this.numberDays?101.13:74.86,c=this.showHour?1:d/24/this.hourWidth,m=o?0:this.hourDiff(t,r.startDate)*c;r.startOffset=m;var v=this.addDays(this.periodStart,this.numberDays),h=Math.min(336-m,this.hourDiff(r.startDate<t?t:r.startDate,r.endDate<v?r.endDate:v))*c;r.span=h,r.id||r.classes.push("astreinte"),o&&r.classes.push("continued"),this.dayDiff(t,r.endDate)>this.numberDays&&r.classes.push("toBeContinued"),this.isInPast(r.endDate)&&r.classes.push("past"),r.originalEvent&&r.originalEvent.url&&r.classes.push("hasUrl");for(var _=0;_<this.numberDays;_++)if(_===m){for(var f=0;s[_][f];)f++;r.eventRow=f,s[_][f]=!0}else _<m+h&&(s[_][r.eventRow]=!0);i.push(r)}return i},getFormattedTimeRange:function(t){var e=this.formattedTime(t.startDate,this.displayLocale,this.timeFormatOptions),a="";return this.isSameDateTime(t.startDate,t.endDate)||(a=this.formattedTime(t.endDate,this.displayLocale,this.timeFormatOptions)),(""!==e?'<span class="startTime">'+e+"</span>":"")+(""!==a?'<span class="endTime">'+a+"</span>":"")},getEventTitle:function(t){return this.showEventTimes?this.getFormattedTimeRange(t)+" "+t.title:t.title},getEventTop:function(t){var e=t.eventRow,a=this.eventContentHeight,i=this.eventBorderHeight;return"calc("+this.eventTop+" + "+e+"*"+a+" + "+e+"*"+i+")"},getEventLeft:function(t){return"calc(("+this.hourWidth*t.startOffset+"px))"},getEventWidth:function(t){return this.hourWidth*t.span+"px"},getIncrementedPeriod:function(t){var e=this.incrementPeriod(this.periodStart,this.displayPeriodUom,t),a=this.incrementPeriod(e,this.displayPeriodUom,this.displayPeriodCount);return this.disablePast&&a<=this.today()?null:this.disableFuture&&e>this.today()?null:e}}},f={name:"CalendarViewHeader",props:{headerProps:{type:Object,required:!0}},methods:{onInput:function(t){this.$emit("input",t),this.$root.$emit("input",t)}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cv-header white"},[a("v-layout",{attrs:{row:"",wrap:"","align-center":""}},[a("v-flex",{attrs:{xs12:"","align-center":""}},[a("div",{staticClass:"periodLabel"},[t._t("label")],2)])],1),t._v(" "),a("v-layout",{attrs:{row:"",wrap:"","align-center":""}},[a("v-flex",{attrs:{xs12:"","text-xs-center":""}},[a("div",{staticClass:"cv-header-nav"},[a("v-btn",{staticClass:"previousMonth",attrs:{fab:"",dark:"",small:"",color:"grey lighten-1",disabled:!t.headerProps.previousMonth},on:{click:function(e){t.onInput(t.headerProps.previousMonth)}}},[a("v-icon",[t._v("first_page")])],1),t._v(" "),a("v-btn",{staticClass:"previousPeriod",attrs:{fab:"",dark:"",small:"",color:"grey lighten-1",disabled:!t.headerProps.previousPeriod},on:{click:function(e){t.onInput(t.headerProps.previousPeriod)}}},[a("v-icon",[t._v("chevron_left")])],1),t._v(" "),a("v-btn",{staticClass:"currentPeriod",attrs:{dark:"",small:"",color:"primary"},on:{click:function(e){t.onInput(t.headerProps.currentPeriod)}}},[t._v("Semaine en cours")]),t._v(" "),a("v-btn",{staticClass:"nextPeriod",attrs:{fab:"",dark:"",small:"",color:"grey lighten-1",disabled:!t.headerProps.nextPeriod},on:{click:function(e){t.onInput(t.headerProps.nextPeriod)}}},[a("v-icon",[t._v("chevron_right")])],1),t._v(" "),a("v-btn",{staticClass:"nextMonth",attrs:{fab:"",dark:"",small:"",color:"grey lighten-1",disabled:!t.headerProps.nextMonth},on:{click:function(e){t.onInput(t.headerProps.nextMonth)}}},[a("v-icon",[t._v("last_page")])],1)],1)])],1)],1)},staticRenderFns:[]};var g=a("VU/8")(f,p,!1,function(t){a("81l+")},null,null).exports,b=Object(d.a)("global").mapActions,y={name:"CancelMenu",data:function(){return{x:0,y:0,showCancelMenu:!1,idToDelete:null,title:null,cancelable:null}},mounted:function(){var t=this;this.$root.$on("show-menu-change",function(e,a,i,s,n,r){t.showCancelMenu=e,t.idToDelete=a,t.title=i,t.x=s-150,t.y=n+25,t.cancelable=r})},methods:s()({},b(["deleteUnavailabilities"]),{confirmDelete:function(t){var e=this;this.$swal({title:this.$t("message.delete")+" ?",text:this.title,focusConfirm:!1,showCancelButton:!0,confirmButtonClass:"btn primary btnsmall",cancelButtonClass:"btn btnsmall",cancelButtonText:this.$t("message.no"),confirmButtonText:this.$t("message.yes"),reverseButtons:!0}).then(function(a){a.value&&(e.$swal({title:e.$t("message.finish"),text:"L'indisponibilité a bien été supprimée",confirmButtonClass:"btn primary btnsmall",confirmButtonText:e.$t("message.OK")}),e.deleteUnavailabilities(t),e.showCancelMenu=!1)})}})},D={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-menu",{attrs:{"offset-y":"",absolute:"","position-x":t.x,"position-y":t.y,"close-on-content-click":!1},model:{value:t.showCancelMenu,callback:function(e){t.showCancelMenu=e},expression:"showCancelMenu"}},[a("v-card",[a("v-card-title",[a("v-icon",{staticClass:"roundicon  mr-2"},[t._v("error_outline")]),t._v(t._s(t.title)+"\n      ")],1),t._v(" "),a("v-divider"),t._v(" "),a("v-card-actions",[a("v-btn",{attrs:{small:"",color:"grey"},on:{click:function(e){e.stopPropagation(),t.showCancelMenu=!1}}},[t._v(t._s(t.$t("message.cancel")))]),t._v(" "),t.cancelable?a("v-btn",{attrs:{small:"",color:"primary",dark:""},on:{click:function(e){t.confirmDelete(t.idToDelete)}}},[a("v-icon",[t._v("delete")]),t._v(t._s(t.$t("message.delete")))],1):t._e()],1)],1)],1)},staticRenderFns:[]};var w=a("VU/8")(y,D,!1,function(t){a("w/VB")},null,null).exports,x=Object(d.a)("global").mapGetters,M={name:"UserInformationsMenu",data:function(){return{y:0,x:0,showUserInformationsMenu:!1,user:{},manager:{}}},computed:s()({},x(["getManager"]),{filteredTelephone:function(){return null===this.telephone?null:this.telephone.split(",")}}),mounted:function(){var t=this;this.$root.$on("show-menu-user",function(e,a,i,s){t.showUserInformationsMenu=e,t.manager={prenom:a.prenom_n1,nom:a.nom_n1},t.user={nom:a.nom,prenom:a.prenom,matricule:a.matricule,gid_collaborateur:a.gid_collaborateur,telephone:a.telephone},t.y=i+15,t.x=s-150})}},k={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-menu",{attrs:{"offset-y":"",absolute:"","position-y":t.y,"position-x":t.x,bottom:"",origin:"center center",transition:"slide-x-transition","close-on-content-click":!1},model:{value:t.showUserInformationsMenu,callback:function(e){t.showUserInformationsMenu=e},expression:"showUserInformationsMenu"}},[a("v-card",{staticClass:"menu-user"},[a("v-card-title",{staticClass:"title-menu-user"},[a("span",{staticClass:"title-center"},[a("v-icon",{staticClass:"mr-2"},[t._v("account_circle")]),t._v(" "+t._s(t.user.nom)+" "+t._s(t.user.prenom))],1)]),t._v(" "),a("v-divider"),t._v(" "),a("v-card-text",[a("p",[t._v("matricule : "),a("b",[t._v(t._s(t.user.matricule))])]),t._v(" "),a("p",[t._v("\n          responsable :\n\t\t\t\t\t"),a("b",[t._v(t._s(t.manager.nom+" "+t.manager.prenom))])]),t._v(" "),t._l(t.user.telephone,function(e){return a("div",{key:e.id},[a("v-icon",{staticClass:"mr-2"},[t._v("phone")]),t._v(" "+t._s(":  "+e)+"\n\t\t\t\t")],1)})],2)],1)],1)},staticRenderFns:[]};var C=a("VU/8")(M,k,!1,function(t){a("q0Ti")},null,null).exports,Y="addindispo:leave",$="loadCalendar",S={showDate:{type:Date,default:function(){}},displayPeriodUom:{type:String,default:function(){return"week"}},displayPeriodCount:{type:Number,default:function(){return 1}},locale:{type:String,default:function(){}},monthNameFormat:{type:String,default:function(){return"long"}},weekdayNameFormat:{type:String,default:function(){return"short"}},showEventTimes:{type:Boolean,default:function(){return!1}},timeFormatOptions:{type:Object,default:function(){return{shortTime:!0}}},disablePast:{type:Boolean,default:function(){return!1}},disableFuture:{type:Boolean,default:function(){return!1}},enableDragDrop:{type:Boolean,default:function(){return!1}},startingDayOfWeek:{type:Number,default:function(){return 0}},dateClasses:{type:Object,default:function(){}},eventTop:{type:String,default:function(){return"1.4em"}},eventContentHeight:{type:String,default:function(){return"1.4em"}},eventBorderHeight:{type:String,default:function(){return"2px"}}},P={displayLocale:function(){return this.locale||this.getDefaultBrowserLocale()},defaultedShowDate:function(){return this.showDate||this.today()},periodStart:function(){return this.beginningOfPeriod(this.defaultedShowDate,this.displayPeriodUom,this.startingDayOfWeek)},periodEnd:function(){return this.addDays(this.incrementPeriod(this.periodStart,this.displayPeriodUom,this.displayPeriodCount),-1)},displayFirstDate:function(){return this.beginningOfWeek(this.periodStart,this.startingDayOfWeek)},displayLastDate:function(){return this.endOfWeek(this.periodEnd,this.startingDayOfWeek)},weeksOfPeriod:function(){var t=this,e=Math.floor((this.dayDiff(this.displayFirstDate,this.displayLastDate)+1)/this.numberDays);return Array(e).fill().map(function(e,a){return t.addDays(t.displayFirstDate,a*t.numberDays)})},monthNames:function(){return this.getFormattedMonthNames(this.displayLocale,this.monthNameFormat)},weekdayNames:function(){return this.getFormattedWeekdayNames(this.displayLocale,this.weekdayNameFormat,this.startingDayOfWeek)},fixedEvents:function(){return this.events.length?this.events.map(this.normalizeEvent):[]},periodLabel:function(){return this.formattedPeriod(this.periodStart,this.periodEnd,this.displayPeriodUom,this.monthNames)},getDayWeek:function(t){return t},headerProps:function(){return{previousMonth:this.getIncrementedPeriod(14===this.numberDays?-2:-4),previousPeriod:this.getIncrementedPeriod(14===this.numberDays?-.5:-1),nextPeriod:this.getIncrementedPeriod(14===this.numberDays?.5:1),nextMonth:this.getIncrementedPeriod(14===this.numberDays?2:4),currentPeriod:this.beginningOfPeriod(this.today(),this.displayPeriodUom,this.startingDayOfWeek),periodStart:this.periodStart+1,periodEnd:this.periodEnd,displayLocale:this.displayLocale,displayFirstDate:this.displayFirstDate,displayLastDate:this.displayLastDate,monthNames:this.monthNames,fixedEvents:this.fixedEvents}}},U={idBlocDay:null,debounce:null,debounceTimer:500,fab:!1,currentDragEvent:null,showCancelMenu:!1,idToDelete:null,y:0,hourWidth:35,dayWidth:840,showHour:!1,numberDays:window.innerWidth<1024?7:14,showStandbyTime:!0,bgColorValue:"158, 158, 158",paginationCalendar:1,paginationCalendarLength:1,numberMembers:15,startDateLatest:null,finishLoading:!1},H=Object(d.a)("global"),E=H.mapState,T=H.mapActions,F=H.mapGetters,L=Object(d.a)("user"),O=L.mapActions,R=L.mapGetters,I={name:"CalendarView",components:{CalendarViewHeader:g,CancelMenu:w,UserInformationsMenu:C},mixins:[h,_],props:S,mounted:function(){var t=this;this.init(),this.$root.$on("input",function(e){t.$root.$emit($,e,t.addDays(e,t.numberDays))}),this.$root.$on($,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.periodStart,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.addDays(t.periodStart,t.numberDays);t.selectedGids.length?t.loadSelectedMembersFromGids(t.paginationCalendar,t.numberMembers).then(function(i){t.selectedGids.length&&(t.paginationCalendarLength=Math.ceil(t.selectedGids.length/t.numberMembers),t.debounceLoadInformations(i,e,a))}):t.loadMembersSameTeams(t.paginationCalendar,t.numberMembers).then(function(i){t.getAllGidsTeam.length&&(t.paginationCalendarLength=Math.ceil(t.getAllGidsTeam.length/t.numberMembers),t.debounceLoadInformations(i,e,a))})}),this.$root.$emit($),this.$nextTick(function(){window.addEventListener("resize",t.loadNumberDays)})},data:function(){return U},computed:l()(s()({},F(["getEmployeesGid"]),R(["getMembersSameTeams","getAllGidsTeam","getGid","getEmployeesPerimeters"]),E({events:function(t){return t.indispos},publicHolidays:function(t){return t.publicHolidays},standbyTime:function(t){return t.standbyTime},perimeters:function(t){return t.perimeters},selectedGids:function(t){return t.selectedGids},requestNumber:function(t){return t.requestNumber}}),{filteredUser:function(){return this.filterUsers(this.getMembersSameTeams)}}),P),methods:s()({},T(["getUsersUnavailabilitiesSearch","getUnavailabilityReasons","getPublicHolidaysSearch","getStandByTimeSearch","loadEmployeesListFromGid","incrementRequestNumber"]),O(["loadMembersSameTeams","loadSelectedMembersFromGids"]),{init:function(){var t=this;this.$root.$on(Y,function(){t.$root.$emit($)})},filterUsers:function(t){return this.perimeters.length?this.perimeters:t},debounceLoadInformations:function(t,e,a){var i=this;clearTimeout(this.debounce),this.debounce=setTimeout(function(){i.loadInformations(t,e,a)},this.debounceTimer)},loadInformations:function(t,e,a){var i=this;t.length&&(this.startDateLatest=e,this.getUnavailabilityReasons().then(function(s){i.incrementRequestNumber(),i.getUsersUnavailabilitiesSearch({requestNumber:i.requestNumber,users:t,startDate:e,endDate:a}),i.getPublicHolidaysSearch({requestNumber:i.requestNumber,users:t,startDate:e,endDate:a}),i.getStandByTimeSearch({requestNumber:i.requestNumber,users:t,startDate:e,endDate:a})}))},changePagination:function(){this.$emit("input",this.startDateLatest),this.$root.$emit("input",this.startDateLatest)},loadNumberDays:function(){this.numberDays=window.innerWidth<1024?7:14},showMenuUserInformations:function(t,e){var a=this;e.preventDefault(),setTimeout(function(){a.$root.$emit("show-menu-user",!0,t,e.clientY,e.clientX)},0)},borderDaySelect:function(t){var e=t.toElement.getAttribute("id");if(e<10&&(e="0"+e),this.idBlocDay!==e)for(var a=document.getElementsByClassName("d"+this.idBlocDay),i=0;i<a.length;i+=1)a[i].classList.remove("borderBold");this.idBlocDay=e;for(var s=document.getElementsByClassName("d"+this.idBlocDay),n=0;n<s.length;n+=1)s[n].classList.toggle("borderBold")},show:function(t){var e=this,a=t.srcElement.id,i=t.srcElement.title,s=this.cancelableUser(a),n=this.cancelableManager(a);t.preventDefault(),setTimeout(function(){e.$root.$emit("show-menu-change",!0,a,i,t.clientX,t.clientY,s||n)},0)},showHideStandbyTime:function(){return this.showStandbyTime=!this.showStandbyTime,this.showStandbyTime},cancelableUser:function(t){var e=this.getEventFromEvents(t),a=e.endDate,i=e.id_user;return this.toLocalDate(a)>new Date&&i===this.getGid},cancelableManager:function(t){return this.getEventFromEvents(t).managed},onClickDay:function(t){this.disablePast&&this.isInPast(t)||this.disableFuture&&this.isInFuture(t)||this.$emit("click-date",t)},onClickEvent:function(t,e){this.$emit("click-event",t,e)},onChangeDate:function(t){this.$emit("show-date-change",t)},onDragStart:function(t,e){return!!this.enableDragDrop&&(this.currentDragEvent=t,e.dataTransfer.setData("text","foo"),this.$emit("drag-start",t),!0)},handleDragEvent:function(t,e){return!!this.enableDragDrop&&(!(!this.currentDragEvent&&!this.$scopedSlots.event)&&(this.$emit(t,this.currentDragEvent,e),!0))},onDragOver:function(t){this.handleDragEvent("drag-over-date",t)},onDragEnter:function(t,e){this.handleDragEvent("drag-enter-date",t)&&e.target.classList.add("draghover")},onDragLeave:function(t,e){this.handleDragEvent("drag-leave-date",t)&&e.target.classList.remove("draghover")},onDrop:function(t,e){this.handleDragEvent("drop-on-date",t)&&e.target.classList.remove("draghover")}})},G={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:["cv-wrapper","locale-"+t.languageCode(t.displayLocale),"locale-"+t.displayLocale,"y"+t.periodStart.getFullYear(),"m"+t.paddedMonth(t.periodStart),"period-"+t.displayPeriodUom,"periodCount-"+t.displayPeriodCount,{past:t.isPastMonth(t.periodStart),future:t.isFutureMonth(t.periodStart),noIntl:!t.supportsIntl}]},[a("v-speed-dial",{staticStyle:{"z-index":"1"},attrs:{right:"",absolute:""},model:{value:t.fab,callback:function(e){t.fab=e},expression:"fab"}},[a("v-btn",{class:{event:t.showHour},attrs:{slot:"activator",color:"grey",dark:"",fab:""},on:{click:function(e){t.showHour=!t.showHour}},slot:"activator",model:{value:t.fab,callback:function(e){t.fab=e},expression:"fab"}},[a("v-icon",{staticStyle:{"font-size":"35px"}},[t._v("zoom_in")]),t._v(" "),a("v-icon",{staticStyle:{"font-size":"35px"}},[t._v("zoom_out")])],1)],1),t._v(" "),t._t("header",[a("calendar-view-header",{attrs:{"header-props":t.headerProps},on:{input:t.onChangeDate}},[a("template",{slot:"label"},[t._v(t._s(t.periodLabel))])],2)],{headerProps:t.headerProps}),t._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"cv-list-user-overflow",attrs:{md2:"",xs3:""}},[a("div",{staticClass:" list-users-header"},[a("v-icon",{staticClass:"pt-2",staticStyle:{"font-size":"30px"}},[t._v("account_circle")])],1),t._v(" "),a("ul",{staticClass:"list-users pl-1"},t._l(t.filteredUser,function(e){return a("li",{key:e.gid_collaborateur,staticClass:"cursor-pointer item",staticStyle:{overflow:"hidden","text-overflow":"ellipsis",display:"block","white-space":"nowrap",padding:"2px"},on:{click:function(a){a.stopPropagation(),t.showMenuUserInformations(e,a)}}},[t._v("\r\n                    "+t._s(e.code_entite+" - ")+"\r\n                    "),a("span",{staticClass:"color-secondary"},[t._v("\r\n                        "+t._s(e.nom+" "+e.prenom)+"\r\n                    ")])])}))]),t._v(" "),a("v-flex",{staticClass:"cv-container-scroll",attrs:{md10:"",xs9:""}},[a("div",{staticClass:"cv-container mt-3"},[a("div",{staticClass:"cv-header-days cursor-pointer"},[t._l(t.weekdayNames,function(e,i){return[t._t("dayHeader",[a("div",{key:i+"-dow",staticClass:"cv-header-day",class:["dow"+i,{headerzoom:t.showHour,today:t.isSameDate(t.getDateDay(t.weeksOfPeriod,i),t.today())}],attrs:{id:t.getMonday(t.weeksOfPeriod,i)},on:{click:t.borderDaySelect}},[t._v(t._s(e)+"\r\n                                "),a("span",{staticClass:"indexDisplay",attrs:{id:t.getMonday(t.weeksOfPeriod,i)}},[t._v("\r\n                                    "+t._s(t.getMonday(t.weeksOfPeriod,i))+"\r\n                                ")])])],{index:i+"-dow",label:e})]})],2),t._v(" "),a("div",[t.showHour?a("table",{staticClass:"cv-header-hours  cv-header-days"},t._l(t.numberDays,function(e){return a("tr",{key:"1"+e,ref:"header-day",refInFor:!0,staticClass:"cv-header-day",class:{headerzoom:t.showHour,today:t.isSameDate(t.getDateDay(t.weeksOfPeriod,e-1),t.today())}},t._l(24,function(e){return a("td",{key:"1"+e,staticStyle:{"text-align":"right"}},[t._v(t._s(e)+"h")])}))})):a("table",{staticClass:"cv-header-hours  cv-header-days"},t._l(t.numberDays,function(e){return a("tr",{key:"1"+e,ref:"header-day",refInFor:!0,staticClass:"cv-header-day",class:{headerzoom:t.showHour,today:t.isSameDate(t.getDateDay(t.weeksOfPeriod,e-1),t.today())}},[a("td",{staticStyle:{"text-align":"center","border-right":"1px solid #ccc"}},[t._v("am")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("pm")])])}))]),t._v(" "),t._l(t.filteredUser,function(e,i){return a("div",{key:""+i,staticClass:"cv-weeks"},t._l(t.weeksOfPeriod,function(i,s){return a("div",{key:s+"-week",class:["cv-week","week"+(s+1),"ws"+t.isoYearMonthDay(i)]},[t._l(t.daysOfWeek(i),function(i,s){return a("div",{key:s+"-day",staticClass:"max-width",class:["cv-day","dow"+i.getDay(),"d"+t.isoYearMonthDay(i),"d"+t.isoMonthDay(i),"d"+t.paddedDay(i),"instance"+t.instanceOfMonth(i),{dayzoom:t.showHour},{weekend:t.isWeekend(i),holiday:t.isHoliday(t.publicHolidays[e.gid_collaborateur],i)}].concat(t.dateClasses&&t.dateClasses[t.isoYearMonthDay(i)]||null),on:{click:function(e){t.onClickDay(i)},drop:function(e){e.preventDefault(),t.onDrop(i,e)},dragover:function(e){e.preventDefault(),t.onDragOver(i)},dragenter:function(e){e.preventDefault(),t.onDragEnter(i,e)},dragleave:function(e){e.preventDefault(),t.onDragLeave(i,e)}}},[a("div",{staticClass:"cv-day-number"},[t.showHour?a("table",{staticClass:"cv-hours",staticStyle:{width:"100%"}},[a("tr",[a("td",{staticClass:"cv-hour-td hourzoom"}),t._v(" "),a("td",{staticClass:"cv-hour-td hourzoom"}),t._v(" "),a("td",{staticClass:"cv-hour-td hourzoom"}),t._v(" "),a("td",{staticClass:"cv-hour-td hourzoom"}),t._v(" "),a("td",{staticClass:"cv-hour-td hourzoom"}),t._v(" "),a("td",{staticClass:"cv-hour-td hourzoom"}),t._v(" "),a("td",{staticClass:"cv-hour-td hourzoom"}),t._v(" "),a("td",{staticClass:"cv-hour-td hourzoom"}),t._v(" "),a("td",{staticClass:"cv-hour-td hourzoom"}),t._v(" "),a("td",{staticClass:"cv-hour-td hourzoom"}),t._v(" "),a("td",{staticClass:"cv-hour-td hourzoom"}),t._v(" "),a("td",{staticClass:"cv-hour-td hourzoom"}),t._v(" "),a("td",{staticClass:"cv-hour-td hourzoom"}),t._v(" "),a("td",{staticClass:"cv-hour-td hourzoom"}),t._v(" "),a("td",{staticClass:"cv-hour-td hourzoom"}),t._v(" "),a("td",{staticClass:"cv-hour-td hourzoom"}),t._v(" "),a("td",{staticClass:"cv-hour-td hourzoom"}),t._v(" "),a("td",{staticClass:"cv-hour-td hourzoom"}),t._v(" "),a("td",{staticClass:"cv-hour-td hourzoom"}),t._v(" "),a("td",{staticClass:"cv-hour-td hourzoom"}),t._v(" "),a("td",{staticClass:"cv-hour-td hourzoom"}),t._v(" "),a("td",{staticClass:"cv-hour-td hourzoom"}),t._v(" "),a("td",{staticClass:"cv-hour-td hourzoom"}),t._v(" "),a("td",{staticClass:"cv-hour-td hourzoom"})])]):t._e()]),t._v(" "),t._t("dayContent",null,{day:i})],2)}),t._v(" "),t._l(t.getWeekEvents(i,e),function(e){return[!e.id&&t.showStandbyTime?t._t("event",[a("div",{class:e.classes,style:"margin : 0px;left: "+t.getEventLeft(e)+";width: "+t.getEventWidth(e)+";text-align: left"})],{event:e,weekStartDate:i}):t._e(),t._v(" "),e.id?t._t("event",[a("div",{key:e.id,staticClass:"cv-event",class:e.classes,style:"background:"+e.bgColor+";margin : 0px;left: "+t.getEventLeft(e)+";width: "+t.getEventWidth(e)+";text-align: left",attrs:{id:e.id,draggable:t.enableDragDrop,title:e.tooltip},domProps:{innerHTML:t._s(t.getEventTitle(e))},on:{dragstart:function(a){t.onDragStart(e,a)},click:t.show}})],{event:e,weekStartDate:i,top:t.getEventTop(e)}):t._e()]})],2)}))})],2)]),t._v(" "),a("CancelMenu"),t._v(" "),a("UserInformationsMenu")],1),t._v(" "),t.filteredUser.length?[a("div",{staticClass:"text-xs-center"},[a("v-pagination",{attrs:{length:t.paginationCalendarLength,"total-visible":7},on:{input:t.changePagination},model:{value:t.paginationCalendar,callback:function(e){t.paginationCalendar=e},expression:"paginationCalendar"}})],1)]:t._e()],2)},staticRenderFns:[]};var A=a("VU/8")(I,G,!1,function(t){a("YESN")},null,null).exports,V=Object(d.a)("global"),B=V.mapActions,z=V.mapState,N={data:function(){return{choiceUnavailability:null,choiceHour:null,toggle_one:0,radioGroupHalfDay:0,radioGroupPeriodStart:0,radioGroupPeriodEnd:0,start_date_menu:null,start_time_menu:null,end_date_menu:null,end_time_menu:null,unavailabilityReasonsModel:null,familyUnavailabilityReasonsModel:null,unavailabilityReasonsItems:[],start_date:null,end_date:null,start_time:null,end_time:null,disabled_morning:!1,disabled_morning_period:!1,reasonBalance:!1,reasonProof:!1,reasonValidation:!1}},mounted:function(){this.getUnavailabilityReasonsForMe()},computed:s()({validated:function(){return!(this.unavailabilityReasonsModel&&this.start_time&&this.start_date&&this.end_time&&this.end_date)},start_date_fr:function(){return r()(this.start_date).format("DD/MM/YYYY")},end_date_fr:function(){return this.end_date?r()(this.end_date).format("DD/MM/YYYY"):null},min_start_date:function(){return r()().format("YYYY-MM-DD")},min_start_date_day:function(){return r()().add(1,"days").format("YYYY-MM-DD")},min_end_date:function(){var t=r()().format("YYYY-MM-DD"),e=r()(this.start_date).isBefore(t)?t:this.start_date;return"PERIOD"===this.choiceUnavailability?r()(this.start_date).add(1,"days").format("YYYY-MM-DD"):e},min_end_time:function(){var t=r()().format("YYYY-MM-DD"),e=r()().format("HH:mm");return r()(this.end_date).isSame(t)&&r()(this.start_date).isSame(t)?r()(e,"HH:mm").isBefore(r()(this.start_time,"HH:mm"))?this.start_time:e:r()(this.start_date).isSame(this.end_date)?this.start_time:r()(this.end_date).isSame(t)?e:null}},z({familyUnavailabilityReasons:function(t){return t.family_unavailability_reasons_for_me}})),methods:s()({initValue:function(){this.udapteFamilyUnavailabilityReason(),this.familyUnavailabilityReasonsModel=null,this.unavailabilityReasonsModel=null,this.choiceHour=null,this.initChoiceHalfDay(),this.toggle_one=0,this.start_date=r()().format("YYYY-MM-DD"),this.end_date=r()().format("YYYY-MM-DD")},udapteUnavailabilityReason:function(){this.unavailabilityReasonsModel?(this.reasonBalance=this.unavailabilityReasonsModel.solde,this.reasonProof=this.unavailabilityReasonsModel.justificatif,this.reasonValidation=this.unavailabilityReasonsModel.validation):(this.reasonBalance=!1,this.reasonProof=!1,this.reasonValidation=!1)},udapteFamilyUnavailabilityReason:function(){var t=this;this.familyUnavailabilityReasonsModel?this.unavailabilityReasonsItems=this.$store.state.global.unavailability_reasons_for_me.filter(function(e){return e.code_abs_non_affectee===t.familyUnavailabilityReasonsModel}):this.unavailabilityReasonsItems=this.$store.state.global.unavailability_reasons_for_me},showChoice:function(){"DAY"===this.choiceUnavailability?this.end_date=this.start_date:"HALFDAY"===this.choiceUnavailability?(this.hourHalfDay(this.radioGroupHalfDay),this.end_date=this.start_date):"PERIOD"===this.choiceUnavailability&&(this.hourHalfDayStart(this.radioGroupPeriodStart),this.hourHalfDayEnd(this.radioGroupPeriodEnd))},showHour:function(t){this.choiceHour=t,null!==this.choiceHour&&this.initChoicePeriodHour()},hourHalfDay:function(t){t?(this.start_time="12:00",this.end_time="24:00"):(this.start_time="00:00",this.end_time="12:00")},hourHalfDayStart:function(t){this.start_time=t?"12:00":"00:00"},hourHalfDayEnd:function(t){this.end_time=t?"24:00":"12:00"},initChoiceHalfDay:function(){this.choiceUnavailability="HALFDAY",this.start_date=r()().format("YYYY-MM-DD"),this.end_date=r()().format("YYYY-MM-DD"),"am"===r()().format("a")?(this.radioGroupHalfDay=0,this.disabled_morning=!1):(this.radioGroupHalfDay=1,this.disabled_morning=!0),this.hourHalfDay(this.radioGroupHalfDay)},initChoiceDay:function(){this.choiceUnavailability="DAY",this.start_date=r()().add(1,"days").format("YYYY-MM-DD"),this.end_date=r()().add(1,"days").format("YYYY-MM-DD"),this.start_time="00:00",this.end_time="24:00"},initChoiceHour:function(){this.choiceUnavailability="HOUR",this.start_date=r()().format("YYYY-MM-DD"),this.end_date=r()().format("YYYY-MM-DD"),this.start_time="00:00",this.end_time="24:00"},initChoicePeriod:function(){this.choiceUnavailability="PERIOD",this.start_date=r()().format("YYYY-MM-DD"),this.end_date=r()().add(1,"days").format("YYYY-MM-DD"),"am"===r()().format("a")?(this.radioGroupPeriodStart=0,this.disabled_morning_period=!1):(this.radioGroupPeriodStart=1,this.disabled_morning_period=!0)},initChoicePeriodHour:function(){var t=new Date;t.setSeconds(0),t.setMilliseconds(0);var e=t.getMinutes(),a=0;e>=0&&e<=14?a=15-e:e>=16&&e<=29?a=30-e:e>=31&&e<=44?a=45-e:e>=46&&e<=59&&(a=60-e);a*=6e4;var i=new Date(t.getTime()+a),s=new Date(i.getTime()+9e5);this.start_time=r()(i).format("HH:mm"),this.end_time=r()(s).format("HH:mm")},saveDateHour:function(t,e){this.$refs[t].save(e),this.checkInputs()},checkInputs:function(){r()(this.start_date).isAfter(this.min_start_date)?(this.disabled_morning=!1,this.disabled_morning_period=!1):(this.disabled_morning=!0,this.disabled_morning_period=!0),r()(this.end_date).isBefore(this.min_end_date)&&("PERIOD"===this.choiceUnavailability?this.end_date=r()(this.start_date).add(1,"days").format("YYYY-MM-DD"):this.end_date=this.start_date),r()(this.end_date).isSame(this.min_end_date)&&r()(this.end_time,"HH:mm").isBefore(r()(this.min_end_time,"HH:mm"))&&(this.end_time=this.min_end_time)}},B(["getUnavailabilityReasonsForMe","saveUnavailability"]),{leave:function(){this.$root.$emit(Y)},showAlert:function(){var t=this;this.showChoice();var e=r()(),a=r()(this.end_date+" "+this.end_time);e.isBefore(a)?(this.saveUnavailability({indisponibilite:this.unavailabilityReasonsModel.code_abs,start_date:this.start_date,end_date:this.end_date,start_time:this.start_time,end_time:this.end_time}).then(function(){return t.leave()}),this.closeDialog(),this.$swal(this.$t("message.finish"),this.messageFinish(),"success")):this.$swal(this.$t("message.error"),this.$t("message.error_date")+"("+a.format("DD-MM-YYYY HH:mm")+").\n          ","error")},messageFinish:function(){var t="";return(this.reasonProof||this.reasonValidation)&&(t='<div class="alert error">\n        <i aria-hidden="true" class="icon material-icons alert__icon">info</i>'),this.reasonProof&&(t=""+t+this.$t("message.reason_proof")),this.reasonValidation&&(this.reasonProof&&(t+="<br/>"),t=""+t+this.$t("message.reason_validation")),(this.reasonProof||this.reasonValidation)&&(t+="</div>"),t+"\n      <div>\n        "+this.$t("message.finish_request")+'<br/>\n            <span style="font-weight: bold">\n              '+r()(this.start_date).format("DD/MM/YYYY")+" "+this.start_time+" \n              "+this.$t("message.the")+" \n              "+r()(this.end_date).format("DD/MM/YYYY")+" "+this.end_time+"\n            </span>\n          <br/>\n        "+this.$t("message.finish_request_save")+"\n      </div>"},closeDialog:function(){this.$emit("exit",!1),this.unavailabilityReasonsModel=null,this.familyUnavailabilityReasonsModel=null}})},W={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-container",[a("v-card-title",{staticClass:"subtitle"},[a("v-icon",{staticClass:"roundicon  mr-2"},[t._v("calendar_today")]),t._v(" "+t._s(t.$t("message.unavailability"))+"\n\t\t")],1),t._v(" "),a("v-divider"),t._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{md12:""}},[a("v-subheader",{staticClass:"subHeader"},[t._v("\n\t\t\t\t\t"+t._s(t.$t("message.step1")))]),t._v(" "),a("v-subheader",[t._v("\n\t\t\t\t\t"+t._s(t.$t("message.reason_unavailability_mandatory"))+"\n\t\t\t\t")])],1)],1),t._v(" "),a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-select",{attrs:{"item-value":"code_abs_non_affectee","item-text":"libelle_abs_non_affectee",items:t.familyUnavailabilityReasons,label:t.$t("message.filter_family_reason_unavailability"),autocomplete:"","single-line":"",clearable:""},on:{input:t.udapteFamilyUnavailabilityReason},model:{value:t.familyUnavailabilityReasonsModel,callback:function(e){t.familyUnavailabilityReasonsModel=e},expression:"familyUnavailabilityReasonsModel"}})],1)],1),t._v(" "),a("v-layout",{attrs:{id:"unvailability_reason",row:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-select",{attrs:{"item-value":"conditionSubmission","item-text":"lib",items:t.unavailabilityReasonsItems,label:t.$t("message.reason_unavailability"),autocomplete:"","single-line":"",clearable:""},on:{input:t.udapteUnavailabilityReason},model:{value:t.unavailabilityReasonsModel,callback:function(e){t.unavailabilityReasonsModel=e},expression:"unavailabilityReasonsModel"}})],1)],1),t._v(" "),t.reasonBalance?a("v-layout",[a("v-flex",{attrs:{xs12:""}},[a("v-alert",{attrs:{value:!0,type:"error"}},[t._v(t._s(t.$t("message.reason_payment")))])],1)],1):t._e(),t._v(" "),a("v-divider"),t._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{md12:""}},[a("v-subheader",{staticClass:"subHeader"},[t._v("\n\t\t\t\t\t"+t._s(t.$t("message.step2")))])],1)],1),t._v(" "),a("v-layout",{staticClass:"mt-3 mb-4",attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{md12:"","align-center":""}},[a("v-layout",{attrs:{"align-center":"","justify-center":"",row:""}},[a("v-btn-toggle",{attrs:{mandatory:""},model:{value:t.toggle_one,callback:function(e){t.toggle_one=e},expression:"toggle_one"}},[a("v-btn",{staticClass:"btnActive",attrs:{active:""},on:{click:t.initChoiceHalfDay}},[t._v(t._s(t.$t("message.half_day")))]),t._v(" "),a("v-btn",{staticClass:"btnActive",on:{click:t.initChoiceDay}},[t._v(t._s(t.$t("message.day")))]),t._v(" "),a("v-btn",{staticClass:"btnActive",on:{click:t.initChoicePeriod}},[t._v(t._s(t.$t("message.period")))]),t._v(" "),a("v-btn",{staticClass:"btnActive",on:{click:t.initChoiceHour}},[t._v(t._s(t.$t("message.hour")))])],1)],1)],1)],1),t._v(" "),"HOUR"===t.choiceUnavailability?a("div",{staticClass:"mt-3 mb-3"},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{md6:"","align-center":""}},[a("v-menu",{ref:"start_date_menu",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":t.start_date,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},on:{"update:returnValue":function(e){t.start_date=e}},model:{value:t.start_date_menu,callback:function(e){t.start_date_menu=e},expression:"start_date_menu"}},[a("v-text-field",{attrs:{slot:"activator",label:"Date de début","prepend-icon":"event",readonly:""},slot:"activator",model:{value:t.start_date_fr,callback:function(e){t.start_date_fr=e},expression:"start_date_fr"}}),t._v(" "),a("v-date-picker",{attrs:{locale:"fr-FR","first-day-of-week":1,scrollable:""},on:{input:function(e){t.saveDateHour("start_date_menu",t.start_date)}},model:{value:t.start_date,callback:function(e){t.start_date=e},expression:"start_date"}})],1)],1),t._v(" "),a("v-flex",{attrs:{md6:"","align-center":""}},[a("v-menu",{ref:"end_date_menu",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":t.end_date,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},on:{"update:returnValue":function(e){t.end_date=e}},model:{value:t.end_date_menu,callback:function(e){t.end_date_menu=e},expression:"end_date_menu"}},[a("v-text-field",{attrs:{slot:"activator",label:"Date de fin","prepend-icon":"event",readonly:""},slot:"activator",model:{value:t.end_date_fr,callback:function(e){t.end_date_fr=e},expression:"end_date_fr"}}),t._v(" "),a("v-date-picker",{attrs:{locale:"fr-FR",min:t.min_end_date,"first-day-of-week":1,scrollable:""},on:{input:function(e){t.saveDateHour("end_date_menu",t.end_date)}},model:{value:t.end_date,callback:function(e){t.end_date=e},expression:"end_date"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"mt-3"},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{md6:""}},[t._v("\n\t\t\t\t\t\t"+t._s(t.$t("message.start_hour"))+"\n\t\t\t\t\t")]),t._v(" "),a("v-flex",{attrs:{md6:""}},[t._v("\n\t\t\t\t\t\t"+t._s(t.$t("message.end_hour"))+"\n\t\t\t\t\t")])],1),t._v(" "),a("v-layout",{attrs:{row:""}},[a("v-flex",{staticClass:"mt-2 mb-3",attrs:{id:"start_time",md6:""}},[a("el-time-select",{attrs:{clearable:"",size:"medium","picker-options":{start:"00:00",step:"00:15",end:"23:45"},"arrow-control":"true",placeholder:"Heure de début"},on:{change:t.checkInputs},model:{value:t.start_time,callback:function(e){t.start_time=e},expression:"start_time"}})],1),t._v(" "),a("v-flex",{staticClass:"mt-2 mb-3",attrs:{id:"end_time",md6:""}},[a("el-time-select",{attrs:{clearable:"",size:"medium","picker-options":{start:"00:00",step:"00:15",end:"23:30",minTime:t.min_end_time},"arrow-control":"true",placeholder:"Heure de fin"},model:{value:t.end_time,callback:function(e){t.end_time=e},expression:"end_time"}})],1)],1)],1)],1):t._e(),t._v(" "),"PERIOD"===t.choiceUnavailability?a("div",{staticClass:"mt-3 mb-3"},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{md6:"","align-center":""}},[a("v-menu",{ref:"start_date_menu",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":t.start_date,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},on:{"update:returnValue":function(e){t.start_date=e}},model:{value:t.start_date_menu,callback:function(e){t.start_date_menu=e},expression:"start_date_menu"}},[a("v-text-field",{attrs:{slot:"activator",label:"Date de début","prepend-icon":"event",readonly:""},slot:"activator",model:{value:t.start_date_fr,callback:function(e){t.start_date_fr=e},expression:"start_date_fr"}}),t._v(" "),a("v-date-picker",{attrs:{locale:"fr-FR","first-day-of-week":1,scrollable:""},on:{input:function(e){t.saveDateHour("start_date_menu",t.start_date)}},model:{value:t.start_date,callback:function(e){t.start_date=e},expression:"start_date"}})],1)],1),t._v(" "),a("v-flex",{attrs:{md6:"","align-center":""}},[a("v-menu",{ref:"end_date_menu",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":t.end_date,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},on:{"update:returnValue":function(e){t.end_date=e}},model:{value:t.end_date_menu,callback:function(e){t.end_date_menu=e},expression:"end_date_menu"}},[a("v-text-field",{attrs:{slot:"activator",label:"Date de fin","prepend-icon":"event",readonly:""},slot:"activator",model:{value:t.end_date_fr,callback:function(e){t.end_date_fr=e},expression:"end_date_fr"}}),t._v(" "),a("v-date-picker",{attrs:{locale:"fr-FR",min:t.min_end_date,"first-day-of-week":1,scrollable:""},on:{input:function(e){t.saveDateHour("end_date_menu",t.end_date)}},model:{value:t.end_date,callback:function(e){t.end_date=e},expression:"end_date"}})],1)],1)],1),t._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{md6:""}},[a("v-layout",{attrs:{"align-center":"","justify-center":"",row:""}},[a("v-radio-group",{model:{value:t.radioGroupPeriodStart,callback:function(e){t.radioGroupPeriodStart=e},expression:"radioGroupPeriodStart"}},[a("v-radio",{attrs:{label:t.$t("message.morning"),disabled:t.disabled_morning_period,value:0,color:"primary"}}),t._v(" "),a("v-radio",{attrs:{label:t.$t("message.afternoon"),value:1,color:"primary"}})],1)],1)],1),t._v(" "),a("v-flex",{attrs:{md6:""}},[a("v-layout",{attrs:{"align-center":"","justify-center":"",row:""}},[a("v-radio-group",{model:{value:t.radioGroupPeriodEnd,callback:function(e){t.radioGroupPeriodEnd=e},expression:"radioGroupPeriodEnd"}},[a("v-radio",{attrs:{label:t.$t("message.morning"),value:0,color:"primary"}}),t._v(" "),a("v-radio",{attrs:{label:t.$t("message.afternoon"),value:1,color:"primary"}})],1)],1)],1)],1)],1):"DAY"===t.choiceUnavailability?a("div",{staticClass:"mt-3 mb-3"},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{md12:"","align-center":""}},[a("v-menu",{ref:"start_date_menu",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":t.start_date,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},on:{"update:returnValue":function(e){t.start_date=e}},model:{value:t.start_date_menu,callback:function(e){t.start_date_menu=e},expression:"start_date_menu"}},[a("v-text-field",{attrs:{slot:"activator",label:t.$t("message.select_day"),"prepend-icon":"event",readonly:""},slot:"activator",model:{value:t.start_date_fr,callback:function(e){t.start_date_fr=e},expression:"start_date_fr"}}),t._v(" "),a("v-date-picker",{attrs:{locale:"fr-FR",min:t.min_start_date_day,"first-day-of-week":1,scrollable:""},on:{input:function(e){t.saveDateHour("start_date_menu",t.start_date)}},model:{value:t.start_date,callback:function(e){t.start_date=e},expression:"start_date"}})],1)],1)],1)],1):"HALFDAY"===t.choiceUnavailability?a("div",{staticClass:"mt-3 mb-3"},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{md6:"","align-center":""}},[a("v-menu",{ref:"start_date_menu",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":t.start_date,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},on:{"update:returnValue":function(e){t.start_date=e}},model:{value:t.start_date_menu,callback:function(e){t.start_date_menu=e},expression:"start_date_menu"}},[a("v-text-field",{attrs:{slot:"activator",label:t.$t("message.select_day"),"prepend-icon":"event",readonly:""},slot:"activator",model:{value:t.start_date_fr,callback:function(e){t.start_date_fr=e},expression:"start_date_fr"}}),t._v(" "),a("v-date-picker",{attrs:{locale:"fr-FR",min:t.min_start_date,"first-day-of-week":1,scrollable:""},on:{input:function(e){t.saveDateHour("start_date_menu",t.start_date)}},model:{value:t.start_date,callback:function(e){t.start_date=e},expression:"start_date"}})],1)],1)],1),t._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{md6:""}},[a("v-layout",{attrs:{"align-center":"","justify-center":"",row:""}},[a("v-radio-group",{model:{value:t.radioGroupHalfDay,callback:function(e){t.radioGroupHalfDay=e},expression:"radioGroupHalfDay"}},[a("v-radio",{attrs:{label:t.$t("message.morning"),disabled:t.disabled_morning,value:0,color:"primary"}}),t._v(" "),a("v-radio",{attrs:{label:t.$t("message.afternoon"),value:1,color:"primary"}})],1)],1)],1)],1)],1):t._e(),t._v(" "),a("v-divider"),t._v(" "),a("v-card-actions",[a("v-btn",{attrs:{color:"grey",dark:""},on:{click:function(e){return e.stopPropagation(),t.closeDialog(e)}}},[t._v(t._s(t.$t("message.cancel")))]),t._v(" "),a("v-btn",{attrs:{disabled:t.validated,dark:"",color:"primary"},on:{click:t.showAlert}},[t._v(t._s(t.$t("message.confirm")))])],1)],1)],1)},staticRenderFns:[]};var j=a("VU/8")(N,W,!1,function(t){a("CGMp")},null,null).exports,q=Object(d.a)("global"),K=q.mapState,X=q.mapActions,J={data:function(){return{selectedUnavailability:null,showValidator:null,x:null,y:null,pagination:{sortBy:"createdDate",descending:!0},rowsPerPageItems:[10,20,30,{text:this.$t("message.all"),value:-1}],headers:[{text:this.$t("message.createdDate"),value:"createdDate",class:"header"},{text:this.$t("message.startDate"),value:"startDate",class:"header"},{text:this.$t("message.endDate"),value:"endDate",class:"header"},{text:this.$t("message.unavailability_reason"),value:"unavailabilityWording",class:"header"},{text:this.$t("message.status"),value:"statut",class:"header"}]}},methods:s()({},X(["getEmployeesUnavailabilities","loadEmployeeFromGid"]),{displayValidator:function(t,e){t.gid_modification&&(this.loadEmployeeFromGid(t.gid_modification),this.x=e.clientX-250,this.y=e.clientY+15,this.selectedUnavailability=t,this.showValidator=!0)},changeSort:function(t){this.pagination.sortBy===t?this.pagination.descending=!this.pagination.descending:(this.pagination.sortBy=t,this.pagination.descending=!1)}}),filters:{formatDDMMYYYYHHmm:function(t){return r()(t).format("DD/MM/YYYY HH:mm")},formatDDMMYYYY:function(t){return r()(t).format("DD/MM/YYYY")}},mounted:function(){this.getEmployeesUnavailabilities()},computed:s()({},K({listUnavailabilityUser:function(t){return t.unavailabilities},validator:function(t){return t.validator}}),{validatorCardText:function(){return this.selectedUnavailability&&this.validator.nom?("VALIDEE"===this.selectedUnavailability.statut?this.$t("message.valided"):this.$t("message.refused"))+" "+this.$t("message.The")+" "+r()(this.selectedUnavailability.date_modification).format("DD/MM/YYYY à HH:mm")+" "+this.$t("message.by")+" "+this.validator.prenom+" "+this.validator.nom:""}})},Q={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"datatable"},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.listUnavailabilityUser,"must-sort":"",pagination:t.pagination,"rows-per-page-text":t.$t("message.basket_page"),"rows-per-page-items":t.rowsPerPageItems,"no-data-text":t.$t("message.no_data")},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"headerCell",fn:function(e){return[a("v-tooltip",{attrs:{bottom:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[t._v(t._s(e.header.text))]),t._v(" "),a("span",[t._v(t._s(e.header.text))])])]}},{key:"items",fn:function(e){return[a("td",{staticClass:"text-xs-left"},[t._v(t._s(t._f("formatDDMMYYYY")(e.item.createdDate)))]),t._v(" "),a("td",{staticClass:"text-xs-left"},[t._v(t._s(t._f("formatDDMMYYYYHHmm")(e.item.startDate)))]),t._v(" "),a("td",{staticClass:"text-xs-left"},[t._v(t._s(t._f("formatDDMMYYYYHHmm")(e.item.endDate)))]),t._v(" "),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.unavailabilityWording))]),t._v(" "),a("td",{staticClass:"text-xs-left"},["AVALIDER"===e.item.statut?a("v-tooltip",{attrs:{bottom:""}},[a("v-icon",{attrs:{slot:"activator",color:"orange"},slot:"activator"},[t._v("query_builder")]),t._v(" "),a("span",[t._v(t._s(t.$t("message.waiting_validation")))])],1):t._e(),t._v(" "),"CREE"===e.item.statut?a("v-tooltip",{attrs:{bottom:""}},[a("v-icon",{attrs:{slot:"activator",color:"success"},slot:"activator"},[t._v("check_circle_outline")]),t._v(" "),a("span",[t._v(t._s(t.$t("message.request_created")))])],1):t._e(),t._v(" "),"ANNULEE"===e.item.statut?a("v-tooltip",{attrs:{bottom:""}},[a("v-icon",{attrs:{slot:"activator",color:"error"},slot:"activator"},[t._v("remove_circle_outline")]),t._v(" "),a("span",[t._v(t._s(t.$t("message.request_canceled")))])],1):t._e(),t._v(" "),"VALIDEE"===e.item.statut?a("v-tooltip",{attrs:{bottom:""}},[a("v-icon",{style:{cursor:"pointer"},attrs:{slot:"activator",color:"success"},on:{click:function(a){t.displayValidator(e.item,a)}},slot:"activator"},[t._v("check_circle_outline")]),t._v(" "),a("span",[t._v(t._s(t.$t("message.request_accepted")))])],1):t._e(),t._v(" "),"REFUSEE"===e.item.statut?a("v-tooltip",{attrs:{bottom:""}},[a("v-icon",{style:{cursor:"pointer"},attrs:{slot:"activator",color:"error"},on:{click:function(a){t.displayValidator(e.item,a)}},slot:"activator"},[t._v("block")]),t._v(" "),a("span",[t._v(t._s(t.$t("message.request_refused")))])],1):t._e()],1)]}},{key:"pageText",fn:function(e){var a=e.pageStart,i=e.pageStop,s=e.itemsLength;return[t._v("\r\n            "+t._s(t.$t("message.of"))+" "+t._s(a)+" "+t._s(t.$t("message.at"))+" "+t._s(i)+" "+t._s(t.$t("message.on"))+" "+t._s(s)+"\r\n        ")]}}])}),t._v(" "),a("v-divider"),t._v(" "),a("div",{staticClass:"mt-3 ml-3",staticStyle:{"font-size":"11px"}},[a("v-icon",{attrs:{dark:"",color:"warning"}},[t._v("query_builder")]),t._v(" "+t._s(t.$t("message.waiting_validation"))+"\r\n      "),a("v-icon",{staticClass:"ml-5",attrs:{color:"success"}},[t._v("check_circle_outline")]),t._v(" "+t._s(t.$t("message.validated"))+"\r\n      "),a("v-icon",{staticClass:"ml-5",attrs:{color:"error"}},[t._v("remove_circle_outline")]),t._v(" "+t._s(t.$t("message.canceled"))+"\r\n      "),a("v-icon",{staticClass:"ml-5",attrs:{color:"error"}},[t._v("block")]),t._v(" "+t._s(t.$t("message.refused"))+"\r\n    ")],1),t._v(" "),a("v-menu",{attrs:{"offset-y":"",absolute:"","position-x":t.x,"position-y":t.y,"close-on-content-click":!1},model:{value:t.showValidator,callback:function(e){t.showValidator=e},expression:"showValidator"}},[a("v-card",[a("v-card-title",[a("v-icon",{staticClass:"roundicon  mr-2"},[t._v("error_outline")]),t._v("Valideur\r\n        ")],1),t._v(" "),a("v-divider"),t._v(" "),a("v-card-text",{staticClass:"text-xs-center"},[t.validator?a("div",[t._v("\r\n            "+t._s(t.validatorCardText)+"\r\n          ")]):t._e(),t._v(" "),t.validator.nom?t._e():a("v-progress-circular",{attrs:{indeterminate:"",color:"primary",size:"16"}})],1)],1)],1)],1)},staticRenderFns:[]};var Z=a("VU/8")(J,Q,!1,function(t){a("s6Uk")},null,null).exports,tt=Object(d.a)("global"),et=tt.mapState,at=tt.mapActions,it={data:function(){return{selected:[],pagination:{sortBy:"createdDate",descending:!0},rowsPerPageItems:[10,20,30,{text:this.$t("message.all"),value:-1}],headers:[{text:this.$t("message.createdDate"),value:"createdDate",class:"header"},{text:this.$t("message.applicant"),value:"applicant",class:"header"},{text:this.$t("message.startDate"),value:"startDate",class:"header"},{text:this.$t("message.endDate"),value:"endDate",class:"header"},{text:this.$t("message.unavailability_reason"),value:"unavailabilityWording",class:"header"}]}},methods:s()({changeSort:function(t){this.pagination.sortBy===t?this.pagination.descending=!this.pagination.descending:(this.pagination.sortBy=t,this.pagination.descending=!1)},refuseSelected:function(){var t=this;this.selected.forEach(function(e){t.refuseUnavailabilities(e).then(function(a){var i=t.selected.indexOf(e);t.selected.splice(i,1)})})},validateSelected:function(){var t=this;this.selected.forEach(function(e){t.validateUnavailabilities(e).then(function(a){var i=t.selected.indexOf(e);t.selected.splice(i,1)})})}},at(["getUnavailabilitiesToValidate","validateUnavailabilities","refuseUnavailabilities"])),filters:{formatDDMMYYYYHHmm:function(t){return r()(t).format("DD/MM/YYYY HH:mm")},formatDDMMYYYY:function(t){return r()(t).format("DD/MM/YYYY")}},mounted:function(){this.getUnavailabilitiesToValidate()},computed:s()({},et({listUnavailabilityToValidate:function(t){return t.unavailabilitiesToValidate}}))},st={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"datatable"},[a("v-btn",{attrs:{small:"",color:"primary",disabled:!t.selected.length},on:{click:function(e){return e.stopPropagation(),t.validateSelected(e)}}},[a("v-icon",{staticClass:"mr-2"},[t._v("done")]),t._v(t._s(t.$t("message.validate_unavailability")))],1),t._v(" "),a("v-btn",{attrs:{small:"",color:"secondary",disabled:!t.selected.length},on:{click:function(e){return e.stopPropagation(),t.refuseSelected(e)}}},[a("v-icon",{staticClass:"mr-2"},[t._v("close")]),t._v(t._s(t.$t("message.refuse_unavailability")))],1),t._v(" "),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.listUnavailabilityToValidate,"no-data-text":t.$t("message.no_data"),"must-sort":"",pagination:t.pagination,"rows-per-page-text":t.$t("message.basket_page"),"rows-per-page-items":t.rowsPerPageItems,"select-all":""},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"headerCell",fn:function(e){return[a("v-tooltip",{attrs:{bottom:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[t._v(t._s(e.header.text))]),t._v(" "),a("span",[t._v(t._s(e.header.text))])])]}},{key:"items",fn:function(e){return[a("td",{staticClass:"text-xs-left"},[a("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:e.selected,callback:function(a){t.$set(e,"selected",a)},expression:"props.selected"}})],1),t._v(" "),a("td",{staticClass:"text-xs-left"},[t._v(t._s(t._f("formatDDMMYYYY")(e.item.createdDate)))]),t._v(" "),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.nom)+" "+t._s(e.item.prenom))]),t._v(" "),a("td",{staticClass:"text-xs-left"},[t._v(t._s(t._f("formatDDMMYYYYHHmm")(e.item.startDate)))]),t._v(" "),a("td",{staticClass:"text-xs-left"},[t._v(t._s(t._f("formatDDMMYYYYHHmm")(e.item.endDate)))]),t._v(" "),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.unavailabilityWording))])]}},{key:"pageText",fn:function(e){var a=e.pageStart,i=e.pageStop,s=e.itemsLength;return[t._v("\n            "+t._s(t.$t("message.of"))+" "+t._s(a)+" "+t._s(t.$t("message.at"))+" "+t._s(i)+" "+t._s(t.$t("message.on"))+" "+t._s(s)+"\n        ")]}}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)},staticRenderFns:[]};var nt=a("VU/8")(it,st,!1,function(t){a("xIuv")},null,null).exports,rt=Object(d.a)("global"),ot=rt.mapActions,lt=rt.mapGetters,dt=Object(d.a)("user").mapGetters,ct={name:"searchCalendarView",data:function(){return{minToFilter:2,debounce:null,debounceTimer:750,treeFilter:"",treeModel:[],allUsers:[],treeOptions:{checkbox:!0,propertyNames:{text:"nomLong"},filter:{plainList:!1,emptyText:"Aucune entités correspondantes",showChildren:!1,matcher:function(t,e){return t.split(" ").every(function(t){return e.text.toUpperCase().includes(t.toUpperCase())})}}}}},computed:s()({},dt(["getMembersSameTeams","getGid"]),lt(["getAllUsers"]),{treeFilter2:function(){return this.treeFilter.length>this.minToFilter?this.treeFilter.normalize("NFD").replace(/[\u0300-\u036f]/g,""):null},treeDatas:function(){var t=this.getMembersSameTeams.map(function(t){return t.gid_collaborateur}),e=this.$store.state.global.treeStore;if(e.length)for(var a=0;a<e.length;a+=1)e[a].children&&this.traverse(e[a],t);return e}}),methods:s()({},ot(["loadEmployeesListFromGid"]),{traverse:function(t,e){var a=!0,i=t;if(e.indexOf(i.id)>-1&&(i.state={checked:!0}),i.children)for(var s=0;s<i.children.length;s+=1)this.traverse(i.children[s],e),a=a&&this.traverse(i.children[s],e);else i.lib_niv_entite||(a=!1);return a&&(i.state=l()({disabled:!0},i.state)),a},clearSearch:function(){this.treeFilter=""},saveInputs:function(){var t=this,e=this.treeModel.checked.filter(function(e){return!e.children.length&&t.getAllUsers[e.id]}).map(function(e){return t.getAllUsers[e.id]});this.$store.dispatch("global/setSelectedGids",e),this.$root.$emit($)},debounceSave:function(){var t=this;clearTimeout(this.debounce),this.debounce=setTimeout(function(){t.saveInputs()},this.debounceTimer)}}),watch:{treeModel:function(t,e){e.checked&&t.checked.length!==e.checked.length&&this.debounceSave()}}},ut={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{staticClass:"pl-3 pr-3 pb-3",attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{staticClass:"filter-field",attrs:{light:"","prepend-icon":"search","append-icon":"cancel","append-icon-cb":t.clearSearch,"hide-details":"","single-line":"",label:t.$t("message.search_label")},model:{value:t.treeFilter,callback:function(e){t.treeFilter=e},expression:"treeFilter"}})],1),t._v(" "),t.treeDatas.length&&t.getMembersSameTeams.length?a("v-flex",{staticClass:"mt-2",attrs:{xs12:""},on:{keyup:[function(e){return"button"in e||!t._k(e.keyCode,"space",32,e.key," ")?t.debounceSave(e):null},function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.debounceSave(e):null}]}},[a("tree",{ref:"tree",staticClass:"tree-highlights",attrs:{filter:t.treeFilter2,options:t.treeOptions,data:t.treeDatas},model:{value:t.treeModel,callback:function(e){t.treeModel=e},expression:"treeModel"}})],1):t._e()],1)},staticRenderFns:[]};var mt=a("VU/8")(ct,ut,!1,function(t){a("GK+y")},null,null).exports,vt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-list",{attrs:{dense:""}},[a("h1",{attrs:{inset:""}},[t._v(" "+t._s(t.$t("message.status2")))]),t._v(" "),t._l(t.status,function(e){return a("v-list-tile",{key:e.code_color,attrs:{avatar:""}},[a("v-list-tile-avatar",[a("v-icon",{class:[e.code_color,"opacity"]})],1),t._v(" "),a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(e.status_title)}})],1)],1)}),t._v(" "),a("h1",{attrs:{inset:""}},[t._v(" "+t._s(t.$t("message.unavailability_reasons")))]),t._v(" "),t._l(t.unavailability_reasons,function(e,i){return[a("v-list-tile",{key:e.code_color,attrs:{avatar:""}},[a("v-list-tile-avatar",[a("v-icon",{class:[e.code_color,"opacity"]})],1),t._v(" "),a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(e.lib_abs_non_affectee)}})],1)],1),t._v(" "),a("v-divider",{key:i})]})],2)],1)],1)},staticRenderFns:[]};var ht=a("VU/8")({name:"Legends",data:function(){return{status:[{code_color:"waiting",status_title:this.$t("message.waiting")}],unavailability_reasons:[{code_color:"unavailabilities_reason_AAB",code_abs_non_affectee:"AAB",lib_abs_non_affectee:this.$t("message.other_absences")},{code_color:"unavailabilities_reason_ATR",code_abs_non_affectee:"ATR",lib_abs_non_affectee:this.$t("message.work_accident")},{code_color:"unavailabilities_reason_CLI",code_abs_non_affectee:"CLI",lib_abs_non_affectee:this.$t("message.customer_relationship")},{code_color:"unavailabilities_reason_CNG",code_abs_non_affectee:"CNG",lib_abs_non_affectee:this.$t("message.leave")},{code_color:"unavailabilities_reason_DLG",code_abs_non_affectee:"DLG",lib_abs_non_affectee:this.$t("message.delegation")},{code_color:"unavailabilities_reason_ECT",code_abs_non_affectee:"ECT",lib_abs_non_affectee:this.$t("message.framing")},{code_color:"unavailabilities_reason_FEP",code_abs_non_affectee:"FEP",lib_abs_non_affectee:this.$t("message.public_presence")},{code_color:"unavailabilities_reason_FER",code_abs_non_affectee:"FER",lib_abs_non_affectee:this.$t("message.holidays")},{code_color:"unavailabilities_reason_FRM",code_abs_non_affectee:"FRM",lib_abs_non_affectee:this.$t("message.training")},{code_color:"unavailabilities_reason_GES",code_abs_non_affectee:"GES",lib_abs_non_affectee:this.$t("message.management")},{code_color:"unavailabilities_reason_MAL",code_abs_non_affectee:"MAL",lib_abs_non_affectee:this.$t("message.disease")},{code_color:"unavailabilities_reason_REU",code_abs_non_affectee:"REU",lib_abs_non_affectee:this.$t("message.meeting")},{code_color:"unavailabilities_reason_THR",code_abs_non_affectee:"THR",lib_abs_non_affectee:this.$t("message.hours_recovery")}]}}},vt,!1,function(t){a("Giql")},null,null).exports,_t=Object(d.a)("user").mapGetters,ft=Object(d.a)("global").mapState,pt={name:"Default",data:function(){return{drawer:null,drawerL:null,showDate:new Date,displayPeriodUom:"week",dialog:!1,start_date:r()().format("YYYY-MM-DD"),end_date:r()().format("YYYY-MM-DD"),start_time:r()().format("HH:mm"),end_time:r()().format("HH:mm"),afficherPerimetres:!1,min_start_date:r()().format("YYYY-MM-DD"),min_start_date_day:r()().add(1,"days").format("YYYY-MM-DD"),min_end_date:r()().format("YYYY-MM-DD"),min_end_time:r()().format("HH:mm"),visibility:!0,tab:null,showBadge:!1}},created:function(){this.$store.dispatch("user/loadGid")},mounted:function(){this.$store.dispatch("global/loadPerimetersTree")},components:{Calendar:A,searchCalendar:mt,AddIndispo:j,ListUnavailabilityUser:Z,ListUnavailabilityManager:nt,Legends:ht},computed:s()({},ft({numberValidation:function(t){return t.unavailabilitiesToValidate.length}}),_t(["getEmployeesGid"]),{isN1:function(){return"O"===this.getEmployeesGid.isn1}}),watch:{numberValidation:function(){this.showBadge=this.numberValidation>0}},methods:{setShowDate:function(t){this.showDate=t},closeDialog:function(){this.dialog=!1},showDialog:function(){this.dialog=!0,this.$refs.childAddIndispo.initValue()},loadCalendar:function(){this.$refs.childCalendar.changePagination()},loadDataTableEmployeesUnavailabilities:function(){this.$refs.childDatatable.getEmployeesUnavailabilities()},loadDataTableUnavailabilitiesToValidate:function(){this.$refs.childToValidate.getUnavailabilitiesToValidate()},showStandbyTime:function(){this.visibility=this.$refs.childCalendar.showHideStandbyTime()}}},gt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-content",{staticStyle:{margin:"inherit",width:"100%",padding:"inherit"}},[a("v-tabs",{attrs:{color:"grey",dark:"","slider-color":"warning"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab",{attrs:{ripple:""},on:{click:t.loadCalendar}},[t._v("\n      "+t._s(t.$t("message.calendar"))+"\n    ")]),t._v(" "),a("v-tab",{attrs:{ripple:""},on:{click:t.loadDataTableEmployeesUnavailabilities}},[a("v-badge",{attrs:{color:"warning",right:""}},[t._v(t._s(t.$t("message.basket")))])],1),t._v(" "),t.isN1?a("v-tab",{attrs:{ripple:""},on:{click:t.loadDataTableUnavailabilitiesToValidate}},[a("v-badge",{attrs:{color:"warning",right:""},model:{value:t.showBadge,callback:function(e){t.showBadge=e},expression:"showBadge"}},[t._v(t._s(t.$t("message.validations"))),a("span",{attrs:{slot:"badge"},slot:"badge"},[t._v(t._s(t.numberValidation))])])],1):t._e()],1),t._v(" "),a("v-tabs-items",{attrs:{touchless:!0},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab-item",[a("v-flex",{attrs:{"md-12":""}},[a("v-card",{staticClass:"pb-5"},[a("v-card-title",{staticClass:"subtitle"},[a("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(e){return e.stopPropagation(),t.showDialog(e)}}},[a("v-icon",{staticClass:"  mr-2"},[t._v("add")]),t._v(t._s(t.$t("message.declared")))],1),t._v(" "),a("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(e){return e.stopPropagation(),t.showStandbyTime(e)}}},[t.visibility?a("v-icon",{staticClass:"mr-2"},[t._v("visibility")]):a("v-icon",{staticClass:"mr-2"},[t._v("visibility_off")]),t._v(t._s(t.$t("message.standbyTime")))],1),t._v(" "),a("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}},[a("v-icon",{staticClass:"  mr-2"},[t._v("account_circle")]),t._v(t._s(t.$t("message.search")))],1),t._v(" "),a("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(e){e.stopPropagation(),t.drawerL=!t.drawerL}}},[a("v-icon",{staticClass:"  mr-2"},[t._v("help_outline")]),t._v(t._s(t.$t("message.legend")))],1)],1),t._v(" "),a("v-divider"),t._v(" "),a("Calendar",{ref:"childCalendar",staticClass:"mt-4 mx-4 theme-default",attrs:{"show-date":t.showDate,startingDayOfWeek:1,"display-period-uom":t.displayPeriodUom},on:{"show-date-change":t.setShowDate}})],1)],1)],1),t._v(" "),a("v-tab-item",[a("v-flex",{attrs:{"md-12":""}},[a("v-card",{staticClass:"pb-5"},[a("v-card-title",{staticClass:"subtitle"},[a("v-icon",{staticClass:"roundicon  mr-2"},[t._v("shopping_basket")]),t._v(" "+t._s(t.$t("message.basket_list"))+"\n          "),a("v-spacer"),t._v(" "),a("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(e){return e.stopPropagation(),t.showDialog(e)}}},[a("v-icon",{staticClass:"  mr-2"},[t._v("add")]),t._v(t._s(t.$t("message.declared")))],1)],1),t._v(" "),a("ListUnavailabilityUser",{ref:"childDatatable"})],1)],1)],1),t._v(" "),a("v-tab-item",[a("v-flex",{attrs:{"md-12":""}},[a("v-card",{staticClass:"pb-5"},[a("v-card-title",{staticClass:"subtitle"},[a("v-icon",{staticClass:"roundicon  mr-2"},[t._v("verified_user")]),t._v(" "+t._s(t.$t("message.validations_list"))+"\n          ")],1),t._v(" "),a("ListUnavailabilityManager",{ref:"childToValidate"})],1)],1)],1)],1),t._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"600"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("AddIndispo",{ref:"childAddIndispo",on:{exit:t.closeDialog}})],1),t._v(" "),a("v-navigation-drawer",{staticStyle:{width:"400px !important"},attrs:{app:"",temporary:"",right:"","hide-overlay":"",touchless:"",width:"400"},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("div",{staticStyle:{"background-color":"#FF9800",height:"64px",color:"white",padding:"10px"}},[a("v-icon",{staticClass:"mr-2",staticStyle:{"font-size":"30px"},attrs:{dark:""}},[t._v("account_circle")]),t._v(" "),a("span",[t._v(t._s(t.$t("message.perimeter")))])],1),t._v(" "),a("div",[a("search-calendar")],1)]),t._v(" "),a("v-navigation-drawer",{attrs:{app:"",temporary:"",right:"","hide-overlay":"",touchless:""},model:{value:t.drawerL,callback:function(e){t.drawerL=e},expression:"drawerL"}},[a("div",{staticStyle:{"background-color":"#FF9800",height:"64px",color:"white",padding:"10px"}},[a("v-icon",{staticClass:"mr-2",staticStyle:{"font-size":"30px"},attrs:{dark:""}},[t._v("help_outline")]),t._v(" "),a("span",[t._v(t._s(t.$t("message.legend")))])],1),t._v(" "),a("div",[a("Legends")],1)])],1)},staticRenderFns:[]};var bt=a("VU/8")(pt,gt,!1,function(t){a("tQd/")},null,null);e.default=bt.exports},q0Ti:function(t,e){},s6Uk:function(t,e){},"tQd/":function(t,e){},"w/VB":function(t,e){},xIuv:function(t,e){}});
//# sourceMappingURL=0.35dee59acfe99f295d6a.js.map